<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajedrez de Ataque - Problema 1</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        .board-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .board {
            display: grid;
            grid-template-columns: repeat(8, 60px);
            grid-template-rows: repeat(8, 60px);
            border: 2px solid #333;
            margin-bottom: 20px;
        }
        .square {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            position: relative;
        }
        .light {
            background-color: #f0d9b5;
        }
        .dark {
            background-color: #b58863;
        }
        .coordinates {
            display: grid;
            grid-template-columns: repeat(8, 60px);
            text-align: center;
            font-weight: bold;
        }
        .file-coordinates {
            display: flex;
            justify-content: space-around;
            width: 480px;
            margin-bottom: 5px;
        }
        .rank-coordinates {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            height: 480px;
            margin-right: 5px;
        }
        .coords-container {
            display: flex;
        }
        .solution {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            width: 100%;
        }
        .solution h2 {
            color: #2c3e50;
            border-bottom: 1px solid #3498db;
            padding-bottom: 5px;
        }
        .moves {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        .move-btn {
            padding: 10px 15px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .move-btn:hover {
            background-color: #2980b9;
        }
        .move-btn:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        .move-text {
            font-size: 18px;
            text-align: center;
            margin: 10px 0;
            min-height: 24px;
        }
        .last-move {
            background-color: rgba(52, 152, 219, 0.3);
        }
        .move-indicator {
            position: absolute;
            bottom: 2px;
            right: 2px;
            font-size: 12px;
            color: #333;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 3px;
            padding: 1px 3px;
        }
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>Ajedrez de Ataque - Problema 1</h1>
    
    <div class="container">
        <div class="board-container">
            <div class="file-coordinates">
                <span>a</span><span>b</span><span>c</span><span>d</span><span>e</span><span>f</span><span>g</span><span>h</span>
            </div>
            <div class="coords-container">
                <div class="rank-coordinates">
                    <span>8</span><span>7</span><span>6</span><span>5</span><span>4</span><span>3</span><span>2</span><span>1</span>
                </div>
                <div id="board" class="board"></div>
            </div>
            
            <div class="moves">
                <button id="prev-move" class="move-btn">← Anterior</button>
                <button id="next-move" class="move-btn">Siguiente →</button>
            </div>
            <div id="move-text" class="move-text"></div>
            
            <div class="legend">
                <div><strong>Mayúsculas:</strong> Blancas</div>
                <div><strong>Minúsculas:</strong> Negras</div>
            </div>
        </div>
        
        <div class="solution">
            <h2>Solución del Problema</h2>
            <p><strong>1.g6 c6 2.h5 Ad7 3.Ah4 Ac8 4.Axg3#</strong></p>
            <p>Esta secuencia de movimientos lleva a un jaque mate en 4 jugadas. Utiliza los botones para ver cada movimiento paso a paso.</p>
        </div>
    </div>

    <script>
        // Piezas representadas con emojis
        const pieces = {
            'K': '♔', 'Q': '♕', 'R': '♖', 'B': '♗', 'N': '♘', 'P': '♙',
            'k': '♚', 'q': '♛', 'r': '♜', 'b': '♝', 'n': '♞', 'p': '♟'
        };

        // Posición inicial del problema
        const initialPosition = [
            // Fila 8 (índice 0)
            ['', '', '', '', 'b', '', '', ''],  // a8-h8
            // Fila 7 (índice 1)
            ['', 'p', '', 'B', '', 'p', '', ''],  // a7-h7
            // Fila 6 (índice 2)
            ['', '', '', '', '', '', '', ''],  // a6-h6
            // Fila 5 (índice 3)
            ['p', '', 'p', 'p', 'p', '', 'p', 'p'],  // a5-h5
            // Fila 4 (índice 4)
            ['p', 'p', '', 'p', 'p', '', 'p', 'p'],  // a4-h4
            // Fila 3 (índice 5)
            ['', '', 'p', 'K', 'p', '', '', ''],  // a3-h3
            // Fila 2 (índice 6)
            ['', 'p', '', 'B', '', '', '', ''],  // a2-h2
            // Fila 1 (índice 7)
            ['', '', '', '', 'k', '', '', '']   // a1-h1
        ];

        // Secuencia de movimientos
        const moves = [
            { 
                move: "1.g6", 
                description: "Las blancas avanzan el peón de g2 a g6",
                from: { row: 6, col: 6 }, // g2
                to: { row: 2, col: 6 }    // g6
            },
            { 
                move: "c6", 
                description: "Las negras responden con c7-c6",
                from: { row: 1, col: 2 }, // c7
                to: { row: 2, col: 2 }    // c6
            },
            { 
                move: "2.h5", 
                description: "Las blancas continúan con h2-h5",
                from: { row: 6, col: 7 }, // h2
                to: { row: 3, col: 7 }    // h5
            },
            { 
                move: "Ad7", 
                description: "Las negras mueven el alfil a d7",
                from: { row: 0, col: 4 }, // e8 (alfil negro)
                to: { row: 1, col: 3 }    // d7
            },
            { 
                move: "3.Ah4", 
                description: "Las blancas mueven el alfil a h4",
                from: { row: 6, col: 3 }, // d2 (alfil blanco)
                to: { row: 4, col: 7 }    // h4
            },
            { 
                move: "Ac8", 
                description: "Las negras retroceden el alfil a c8",
                from: { row: 1, col: 3 }, // d7 (alfil negro)
                to: { row: 0, col: 2 }    // c8
            },
            { 
                move: "4.Axg3#", 
                description: "¡Jaque mate! El alfil blanco captura en g3",
                from: { row: 4, col: 7 }, // h4 (alfil blanco)
                to: { row: 5, col: 6 }    // g3
            }
        ];

        let currentPosition = JSON.parse(JSON.stringify(initialPosition));
        let currentMoveIndex = -1;
        let lastMove = null;

        // Crear tablero
        function createBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 8; col++) {
                    const square = document.createElement('div');
                    square.classList.add('square');
                    square.classList.add((row + col) % 2 === 0 ? 'light' : 'dark');
                    square.dataset.row = row;
                    square.dataset.col = col;
                    
                    const piece = currentPosition[row][col];
                    if (piece) {
                        square.textContent = pieces[piece];
                        
                        // Añadir indicador de última jugada
                        if (lastMove && 
                            ((row === lastMove.from.row && col === lastMove.from.col) || 
                             (row === lastMove.to.row && col === lastMove.to.col))) {
                            square.classList.add('last-move');
                            
                            const indicator = document.createElement('span');
                            indicator.classList.add('move-indicator');
                            indicator.textContent = (row === lastMove.from.row && col === lastMove.from.col) ? 'Desde' : 'Hasta';
                            square.appendChild(indicator);
                        }
                    }
                    
                    board.appendChild(square);
                }
            }
            
            updateMoveText();
            updateButtons();
        }

        // Actualizar texto del movimiento
        function updateMoveText() {
            const moveText = document.getElementById('move-text');
            
            if (currentMoveIndex === -1) {
                moveText.textContent = "Posición inicial del problema";
            } else if (currentMoveIndex < moves.length) {
                moveText.textContent = `${moves[currentMoveIndex].move} - ${moves[currentMoveIndex].description}`;
            } else {
                moveText.textContent = "¡Jaque mate! La partida ha terminado.";
            }
        }

        // Actualizar estado de los botones
        function updateButtons() {
            document.getElementById('prev-move').disabled = currentMoveIndex <= -1;
            document.getElementById('next-move').disabled = currentMoveIndex >= moves.length - 1;
        }

        // Aplicar siguiente movimiento
        function nextMove() {
            if (currentMoveIndex < moves.length - 1) {
                currentMoveIndex++;
                const move = moves[currentMoveIndex];
                
                // Mover la pieza
                currentPosition[move.to.row][move.to.col] = currentPosition[move.from.row][move.from.col];
                currentPosition[move.from.row][move.from.col] = '';
                
                lastMove = move;
                createBoard();
            }
        }

        // Revertir al movimiento anterior
        function prevMove() {
            if (currentMoveIndex >= 0) {
                const move = moves[currentMoveIndex];
                
                // Revertir el movimiento
                currentPosition[move.from.row][move.from.col] = currentPosition[move.to.row][move.to.col];
                currentPosition[move.to.row][move.to.col] = '';
                
                currentMoveIndex--;
                
                // Actualizar último movimiento
                lastMove = currentMoveIndex >= 0 ? moves[currentMoveIndex] : null;
                
                createBoard();
            }
        }

        // Inicializar
        createBoard();

        // Event listeners para los botones
        document.getElementById('next-move').addEventListener('click', nextMove);
        document.getElementById('prev-move').addEventListener('click', prevMove);
    </script>
</body>
</html>
